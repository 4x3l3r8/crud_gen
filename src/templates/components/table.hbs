{{!-- Table Component Generator (TanStack React Table) --}}
import { useMemo, useState } from 'react';
import { createColumnHelper } from '@tanstack/react-table';
import { Button, HStack, IconButton } from '@chakra-ui/react';
import { useNavigate } from 'react-router-dom';
import { DataTable } from '@/components/common/DataTable';
import type { {{pascalCase entity}} } from '../../types/{{camelCase entity}}';
import { useGet{{plural}}Query, useDelete{{pascalCase entity}}Mutation } from '../../store/{{camelCase
entity}}/{{camelCase entity}}Api';

const columnHelper = createColumnHelper<{{pascalCase entity}}>();

    export const {{pascalCase entity}}Table = () => {
    const navigate = useNavigate();
    const [page, setPage] = useState(1);
    const { data, isLoading, isFetching } = useGet{{plural}}Query({
    page,
    limit: {{pagination.defaultPageSize}},
    });
    const [delete{{pascalCase entity}}] = useDelete{{pascalCase entity}}Mutation();

    const handleEdit = (id: string) => {
    navigate(`/{{route}}/${id}/edit`);
    };

    const handleDelete = async (id: string) => {
    if (window.confirm('Are you sure you want to delete this {{camelCase entity}}?')) {
    await delete{{pascalCase entity}}(id);
    }
    };

    const handleView = (id: string) => {
    navigate(`/{{route}}/${id}`);
    };

    const columns = useMemo(
    () => [
    {{#each tableFields}}
    columnHelper.accessor('{{name}}', {
    header: '{{#if ui.table.header}}{{ui.table.header}}{{else}}{{name}}{{/if}}',
    cell: (info) => info.getValue(),
    {{#if ui.table.sortable}}
    enableSorting: true,
    {{/if}}
    }),
    {{/each}}
    columnHelper.display({
    id: 'actions',
    header: 'Actions',
    cell: ({ row }) => (
    <HStack gap={2}>
        <Button size="sm" variant="ghost" onClick={()=> handleView(row.original.id)}>
            View
        </Button>
        <Button size="sm" variant="ghost" onClick={()=> handleEdit(row.original.id)}>
            Edit
        </Button>
        <Button size="sm" variant="ghost" colorPalette="red" onClick={()=> handleDelete(row.original.id)}
            >
            Delete
        </Button>
    </HStack>
    ),
    }),
    ],
    []
    );

    return (
    <DataTable columns={columns} data={data?.data || []} isLoading={isLoading || isFetching} pagination={{ page, limit:
        {{pagination.defaultPageSize}}, total: data?.meta?.total || 0, onPageChange: setPage, }} />
    );
    };